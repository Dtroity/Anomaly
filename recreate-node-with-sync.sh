#!/bin/bash
# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—é –Ω–æ–¥—ã —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

echo "üîÑ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—é –Ω–æ–¥—ã —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π"
echo "==================================================="
echo ""

# –ü—Ä–æ–≤–µ—Ä–∫–∞, –Ω–∞ –∫–∞–∫–æ–º —Å–µ—Ä–≤–µ—Ä–µ –∑–∞–ø—É—â–µ–Ω —Å–∫—Ä–∏–ø—Ç
if [ ! -f docker-compose.yml ]; then
    echo "‚ö†Ô∏è  –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω –Ω–∞ Control Server (VPS #1)"
    exit 1
fi

echo "‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω Control Server"
echo ""

echo "üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:"
echo ""
echo "1Ô∏è‚É£  –£–¥–∞–ª–∏—Ç–µ –Ω–æ–¥—É –≤ –ø–∞–Ω–µ–ª–∏ Marzban:"
echo "   - –û—Ç–∫—Ä–æ–π—Ç–µ: https://panel.anomaly-connect.online"
echo "   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Nodes -> Node 1"
echo "   - –£–¥–∞–ª–∏—Ç–µ –Ω–æ–¥—É (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É —É–¥–∞–ª–µ–Ω–∏—è)"
echo ""
echo "2Ô∏è‚É£  –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–¥—É –∑–∞–Ω–æ–≤–æ –≤ –ø–∞–Ω–µ–ª–∏:"
echo "   - –ù–∞–∂–º–∏—Ç–µ 'Add Node' –∏–ª–∏ '–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–¥—É'"
echo "   - –ò–º—è: Node 1"
echo "   - –ê–¥—Ä–µ—Å: 185.126.67.67"
echo "   - –ü–æ—Ä—Ç: 62050"
echo "   - API –ø–æ—Ä—Ç: 62051"
echo "   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ"
echo ""
echo "3Ô∏è‚É£  –°–∫–∞—á–∞–π—Ç–µ –Ω–æ–≤—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏–∑ –ø–∞–Ω–µ–ª–∏:"
echo "   - –í —Ä–∞–∑–¥–µ–ª–µ –Ω–æ–¥—ã –Ω–∞–∂–º–∏—Ç–µ '–°–∫–∞—á–∞—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç'"
echo "   - –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞"
echo "   - –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ —Ñ–∞–π–ª –Ω–∞ Control Server:"
echo "     nano /tmp/new-node-cert.pem"
echo "     # –í—Å—Ç–∞–≤—å—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç, —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ (Ctrl+O, Enter, Ctrl+X)"
echo ""
echo "4Ô∏è‚É£  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–∞ –Ω–æ–¥—É:"
echo "   - –ù–∞ Control Server –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:"
echo "     scp /tmp/new-node-cert.pem root@185.126.67.67:/tmp/"
echo "   - –ù–∞ –Ω–æ–¥–µ (VPS #2) –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:"
echo "     cd /opt/Anomaly"
echo "     git pull"
echo "     chmod +x install-node-cert.sh"
echo "     ./install-node-cert.sh /tmp/new-node-cert.pem"
echo ""
echo "5Ô∏è‚É£  –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–π—Ç–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ –∫–ª—é—á —Å –Ω–æ–¥—ã –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö:"
echo "   - –ù–∞ Control Server –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:"
echo "     ./sync-cert-and-key-from-node.sh"
echo ""
echo "6Ô∏è‚É£  –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:"
echo "   - –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å: https://panel.anomaly-connect.online"
echo "   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Nodes -> Node 1"
echo "   - –ù–∞–∂–º–∏—Ç–µ '–ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è'"
echo "   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –Ω–æ–¥—ã"
echo ""
echo "‚úÖ –ì–æ—Ç–æ–≤–æ!"
echo ""

